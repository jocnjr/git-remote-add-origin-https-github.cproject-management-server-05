(this["webpackJsonp05-project-management-client"]=this["webpackJsonp05-project-management-client"]||[]).push([[0],{35:function(e,t,n){e.exports=n(65)},40:function(e,t,n){},41:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),s=n.n(i),l=(n(40),n(2)),c=n(3),o=n(5),u=n(4),h=n(1),m=n(6),p=(n(41),n(16)),d=n(9),g=n.n(d),b=function(){function e(){Object(l.a)(this,e),this.service=g.a.create({baseURL:"https://project-management-05.herokuapp.com/api",withCredentials:!0})}return Object(c.a)(e,[{key:"signup",value:function(e,t){return this.service.post("/signup",{username:e,password:t}).then((function(e){return e.data}))}},{key:"loggedin",value:function(){return this.service.get("/loggedin").then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.service.post("/login",{username:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.service.get("/logout").then((function(e){return e.data}))}}]),e}(),v=n(13),j=n(32);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var E=function(e){var t=e.component,n=e.user,a=Object(j.a)(e,["component","user"]);return console.log(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({component:t,user:n},a)),r.a.createElement(p.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,Object.assign({},e,{loggedInUser:n})):r.a.createElement(p.a,{to:{pathname:"/",prevPath:e.location.pathname}})}}))},O=n(8),k=function(e){var t=e.name,n=e.value,a=e.handleChange;return r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-small",type:"text",placeholder:"enter ".concat(t),name:t,value:n,onChange:function(e){return a(e)}})))},y=function(e){var t=e.name,n=e.value,a=e.handleChange;return r.a.createElement("textarea",{className:"textarea",name:t,placeholder:"enter ".concat(t),value:n,onChange:function(e){return a(e)}})},S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:"",imageUrl:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleFileUpload=n.handleFileUpload.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state,a=n.title,r=n.description,i=n.imageUrl;g.a.post("".concat("https://project-management-05.herokuapp.com/api","/projects"),{title:a,description:r,imageUrl:i},{withCredentials:!0}).then((function(e){t.props.getData(),console.log(e.data),t.setState({title:"",description:""})})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(v.a)({},n,a))}},{key:"handleFileUpload",value:function(e){var t=this;console.log("The file to be uploaded is: ",e.target.files[0]);var n=new FormData;n.append("imageUrl",e.target.files[0]),g.a.post("".concat("https://project-management-05.herokuapp.com/api","/upload"),n,{withCredentials:!0}).then((function(e){t.setState({imageUrl:e.data.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement(k,{name:"title",value:this.state.title,handleChange:this.handleChange}),r.a.createElement(y,{name:"description",value:this.state.description,handleChange:this.handleChange}),r.a.createElement("input",{type:"file",onChange:this.handleFileUpload}),this.state.imageUrl&&r.a.createElement("img",{src:this.state.imageUrl,alt:"my image"}),r.a.createElement("br",null),r.a.createElement("input",{className:"button",type:"submit",value:"Submit"})))}}]),t}(a.Component),C=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={listOfProjects:[]},n.getAllProjects=n.getAllProjects.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getAllProjects",value:function(){var e=this;g.a.get("".concat("https://project-management-05.herokuapp.com/api","/projects"),{withCredentials:!0}).then((function(t){e.setState({listOfProjects:t.data})}))}},{key:"componentDidMount",value:function(){this.getAllProjects()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"60%",float:"left"}},this.state.listOfProjects.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(O.b,{to:"/projects/".concat(e._id)},r.a.createElement("h3",null,e.title)),r.a.createElement("ul",null,e.tasks.map((function(e,t){return r.a.createElement("li",{key:t},"task: ",e.title)}))))}))),r.a.createElement("div",{style:{width:"40%",float:"right"}},r.a.createElement(S,{getData:this.getAllProjects})," "))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={title:n.props.theProject.title,description:n.props.theProject.description},n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChangeTitle=n.handleChangeTitle.bind(Object(h.a)(n)),n.handleChangeDesc=n.handleChangeDesc.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this,n=this.state.title,a=this.state.description;e.preventDefault(),g.a.put("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(this.props.theProject._id),{title:n,description:a},{withCredentials:!0}).then((function(){t.props.getTheProject()})).catch((function(e){return console.log(e)}))}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleChangeDesc",value:function(e){this.setState({description:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,"Edit form"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement(k,{name:"title",value:this.state.title,handleChange:this.handleChangeTitle}),r.a.createElement(y,{name:"description",value:this.state.description,handleChange:this.handleChangeDesc}),r.a.createElement("input",{className:"button",type:"submit",value:"Submit"})))}}]),t}(a.Component),U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:"",isShowing:!1},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.toggleForm=n.toggleForm.bind(Object(h.a)(n)),n.showAddTaskForm=n.showAddTaskForm.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.title,a=this.state.description,r=this.props.theProject._id;g.a.post("".concat("https://project-management-05.herokuapp.com/api","/tasks"),{title:n,description:a,projectID:r},{withCredentials:!0}).then((function(){t.props.getTheProject(),t.setState({title:"",description:""})})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(v.a)({},n,a))}},{key:"toggleForm",value:function(){this.setState({isShowing:!this.state.isShowing})}},{key:"showAddTaskForm",value:function(){if(this.state.isShowing)return r.a.createElement("div",null,r.a.createElement("h3",null,"Add Task"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement(k,{name:"title",value:this.state.title,handleChange:this.handleChange}),r.a.createElement(y,{name:"description",value:this.state.description,handleChange:this.handleChange}),r.a.createElement("input",{className:"button",type:"submit",value:"Submit"})))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("button",{onClick:this.toggleForm}," Add task "),this.showAddTaskForm())}}]),t}(a.Component),P=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={},n.getSingleProject=n.getSingleProject.bind(Object(h.a)(n)),n.deleteProject=n.deleteProject.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getSingleProject()}},{key:"getSingleProject",value:function(){var e=this,t=this.props.match.params;g.a.get("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(t.id),{withCredentials:!0}).then((function(t){var n=t.data;e.setState(n)})).catch((function(e){console.log(e)}))}},{key:"ownershipCheck",value:function(e){var t=this;if(this.props.loggedInUser&&e.owner==this.props.loggedInUser._id)return r.a.createElement("div",null,r.a.createElement("div",null,this.renderEditForm()," "),r.a.createElement("button",{className:"button",onClick:function(){return t.deleteProject()}},"Delete project"),r.a.createElement("div",null,this.renderAddTaskForm()," "))}},{key:"renderEditForm",value:function(){if(this.state.title)return r.a.createElement(w,Object.assign({theProject:this.state,getTheProject:this.getSingleProject},this.props));this.getSingleProject()}},{key:"renderAddTaskForm",value:function(){if(this.state.title)return r.a.createElement(U,{theProject:this.state,getTheProject:this.getSingleProject});this.getSingleProject()}},{key:"deleteProject",value:function(){var e=this,t=this.props.match.params;g.a.delete("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(t.id)).then((function(){e.props.history.push("/projects")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,this.state.title),r.a.createElement("p",null,this.state.description),r.a.createElement("img",{src:this.state.imageUrl,alt:"my image"}),this.state.tasks&&this.state.tasks.length>0&&r.a.createElement("h3",{className:"title"},"Tasks "),this.state.tasks&&this.state.tasks.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(O.b,{to:"/projects/".concat(e.state._id,"/tasks/").concat(t._id)},t.title))})),r.a.createElement("br",null),this.ownershipCheck(this.state),r.a.createElement("br",null))}}]),t}(a.Component),F=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getTheTask()}},{key:"getTheTask",value:function(){var e=this,t=this.props.match.params;g.a.get("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(t.id,"/tasks/").concat(t.taskId),{withCredentials:!0}).then((function(t){var n=t.data;e.setState(n)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.title),r.a.createElement("p",null,this.state.description))}}]),t}(a.Component),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:null},n.service=new b,n.logoutUser=n.logoutUser.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.userInSession!==e.userInSession&&this.setState({loggedInUser:this.props.userInSession})}},{key:"logoutUser",value:function(){var e=this;this.service.logout().then((function(){e.setState({loggedInUser:null}),e.props.getUser(null)}))}},{key:"render",value:function(){return this.state.loggedInUser?r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",null,r.a.createElement("li",null,"Welcome, ",this.state.loggedInUser.username),r.a.createElement("li",null,r.a.createElement(O.b,{to:"/projects",style:{textDecoration:"none"}},"Projects")),r.a.createElement("li",null,r.a.createElement(O.b,{to:"/"},r.a.createElement("button",{onClick:this.logoutUser},"Logout"))))):r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(O.b,{to:"/",style:{textDecoration:"none"}},"Login")),r.a.createElement("li",null,r.a.createElement(O.b,{to:"/signup",style:{textDecoration:"none"}},"Signup")))))}}]),t}(a.Component),T=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:""},n.service=new b,n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.username,a=this.state.password;this.service.signup(n,a).then((function(e){console.log(e),t.setState({username:"",password:""}),t.props.getUser(e),t.props.history.push("/projects")})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(v.a)({},n,a))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null," Username: "),r.a.createElement(k,{name:"username",value:this.state.username,handleChange:this.handleChange}),r.a.createElement("label",null," Password: "),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account ?",r.a.createElement(O.b,{to:"/"}," Login ")))}}]),t}(a.Component),D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:""},n.service=new b,n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.username,a=this.state.password;this.service.login(n,a).then((function(e){t.setState({username:"",password:""}),t.props.getUser(e),t.props.history.push(t.props.location.prevPath?t.props.location.prevPath:"/projects")})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(v.a)({},n,a))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("p",null,"Don't have account?",r.a.createElement(O.b,{to:"/signup"}," Signup")))}}]),t}(a.Component),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:null},n.service=new b,n.getTheUser=n.getTheUser.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"getTheUser",value:function(e){this.setState({loggedInUser:e})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?r.a.createElement("div",{className:"App"},r.a.createElement(I,{userInSession:this.state.loggedInUser,getUser:this.getTheUser}),r.a.createElement(p.d,null,r.a.createElement(E,{user:this.state.loggedInUser,path:"/projects/:id",component:P}),r.a.createElement(E,{user:this.state.loggedInUser,path:"/projects",component:C}))):r.a.createElement("div",{className:"App"},r.a.createElement(I,{userInSession:this.state.loggedInUser}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(T,Object.assign({getUser:e.getTheUser},t))}}),r.a.createElement(p.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(D,Object.assign({getUser:e.getTheUser},t))}}),r.a.createElement(E,{user:this.state.loggedInUser,path:"/projects/:id",component:P}),r.a.createElement(E,{user:this.state.loggedInUser,path:"/projects",component:C}),r.a.createElement(p.b,{exact:!0,path:"/projects/:id/tasks/:taskId",component:F})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(64);s.a.render(r.a.createElement(O.a,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.bac9bd88.chunk.js.map