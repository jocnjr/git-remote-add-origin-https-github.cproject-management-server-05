(this["webpackJsonp05-project-management-client"]=this["webpackJsonp05-project-management-client"]||[]).push([[0],{34:function(e,t,a){e.exports=a(65)},39:function(e,t,a){},41:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),o=(a(39),a(2)),s=a.n(o),u=a(5),i=a(1),m=(a(41),a(12)),p=a(29),f=a(30),h=a(6),v=a.n(h),d=function(){function e(){Object(p.a)(this,e),this.service=v.a.create({baseURL:"https://project-management-05.herokuapp.com/api",withCredentials:!0})}return Object(f.a)(e,[{key:"signup",value:function(e,t){return this.service.post("/signup",{username:e,password:t}).then((function(e){return e.data}))}},{key:"loggedin",value:function(){return this.service.get("/loggedin").then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.service.post("/login",{username:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.service.get("/logout").then((function(e){return e.data}))}}]),e}(),b=a(31),E=a(14),g=r.a.createContext(null);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var O=function(e){var t=e.component,a=Object(E.a)(e,["component"]);return console.log(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({component:t},a)),r.a.createElement(g.Consumer,null,(function(e){return r.a.createElement(m.b,Object.assign({},a,{render:function(a){return e?r.a.createElement(t,Object.assign({},a,{loggedInUser:e})):r.a.createElement(m.a,{to:{pathname:"/",prevPath:a.location.pathname}})}}))}))},w=a(4),k=function(e){var t=e.name,a=e.type,n=e.value,c=e.handleChange;return r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-small",type:a,placeholder:"enter ".concat(t),name:t,value:n,onChange:function(e){return c(e)}})))},y=function(e){var t=e.name,a=e.value,n=e.handleChange;return r.a.createElement("textarea",{className:"textarea",name:t,placeholder:"enter ".concat(t),value:a,onChange:function(e){return n(e)}})},x=function(e){var t=e.getData,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),f=p[0],h=p[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),E=b[0],g=b[1],j=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,v.a.post("".concat("https://project-management-05.herokuapp.com/api","/projects"),{title:l,description:f,imageUrl:E},{withCredentials:!0});case 4:t(),o(""),h(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("The file to be uploaded is: ",t.target.files[0]),(a=new FormData).append("imageUrl",t.target.files[0]),e.prev=3,e.next=6,v.a.post("".concat("https://project-management-05.herokuapp.com/api","/upload"),a,{withCredentials:!0});case 6:n=e.sent,g(n.data.secure_url),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error while uploading the file: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"section"},r.a.createElement("form",{onSubmit:j},r.a.createElement(k,{name:"title",value:l,handleChange:function(e){return o(e.target.value)}}),r.a.createElement(y,{name:"description",value:f,handleChange:function(e){return h(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("div",{className:"file is-small"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",onChange:O}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement("i",{className:"fas fa-upload"})),r.a.createElement("span",{className:"file-label"},"Choose a file\u2026")))),E&&r.a.createElement("img",{src:E,alt:"{title}"}),r.a.createElement("br",null),r.a.createElement("input",{className:"button",type:"submit",value:"Submit"})))},N=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){a||l()}));var l=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat("https://project-management-05.herokuapp.com/api","/projects"),{withCredentials:!0});case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"60%",float:"left"}},a&&a.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(w.b,{to:"/projects/".concat(e._id)},r.a.createElement("h1",{className:"title is-2"},e.title)),r.a.createElement("ul",null,e.tasks.map((function(e,t){return r.a.createElement("li",{key:t},"task: ",e.title)}))))}))),r.a.createElement("div",{style:{width:"40%",float:"right"}},r.a.createElement(x,{getData:l})," "))},C=function(e){var t=e.theProject,a=e.getTheProject,c=Object(n.useState)(t.title),l=Object(i.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(t.description),m=Object(i.a)(u,2),p=m[0],f=m[1];return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,"Edit form"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v.a.put("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(t._id),{title:o,description:p},{withCredentials:!0}).then((function(){a()})).catch((function(e){return console.log(e)}))}},r.a.createElement(k,{name:"title",type:"text",value:o,handleChange:function(e){return s(e.target.value)}}),r.a.createElement(y,{name:"description",value:p,handleChange:function(e){return f(e.target.value)}}),r.a.createElement("input",{className:"button",type:"submit",value:"Submit"})))},S=function(e){var t=e.theProject,a=e.getTheProject,c=Object(n.useState)(""),l=Object(i.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],d=f[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),g=E[0],j=E[1],O=function(){var e=Object(u.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=t._id,e.prev=2,e.next=5,v.a.post("".concat("https://project-management-05.herokuapp.com/api","/tasks"),{title:o,description:h,projectID:r},{withCredentials:!0});case 5:a(),m(""),d(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){j(!g)}}," Add task "),function(){if(g)return r.a.createElement("div",null,r.a.createElement("h3",null,"Add Task"),r.a.createElement("form",{onSubmit:O},r.a.createElement(k,{name:"title",value:o,handleChange:function(e){return m(e.target.value)}}),r.a.createElement(y,{name:"description",value:h,handleChange:function(e){return d(e.target.value)}}),r.a.createElement("input",{className:"button",type:"submit",value:"Submit"})))}())},P=function(e){var t=e.loggedInUser,a=e.history,c=Object(E.a)(e,["loggedInUser","history"]),l=Object(n.useState)(""),o=Object(i.a)(l,2),s=o[0],u=o[1];Object(n.useEffect)((function(){s||m()}));var m=function(){var e=c.match.params;v.a.get("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(e.id),{withCredentials:!0}).then((function(e){var t=e.data;console.log(t,s),u(t)})).catch((function(e){console.log(e)}))},p=function(){if(s.title)return r.a.createElement(C,Object.assign({theProject:s,getTheProject:m},c));m()},f=function(){if(s.title)return r.a.createElement(S,{theProject:s,getTheProject:m});m()},h=function(){var e=c.match.params;v.a.delete("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(e.id)).then((function(){a.push("/projects")})).catch((function(e){console.log(e)}))};return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},s.title),r.a.createElement("p",null,s.description),s.imageUrl&&r.a.createElement("img",{src:s.imageUrl,alt:s.title}),r.a.createElement(g.Consumer,null,(function(e){return r.a.createElement("p",{className:"title is-6"},"loggedInUser by context: ",e.username)})),s.tasks&&s.tasks.length>0&&r.a.createElement("h3",{className:"subtitle is-5"},"Tasks "),s.tasks&&s.tasks.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(w.b,{to:"/projects/".concat(s._id,"/tasks/").concat(e._id)},e.title))})),r.a.createElement("br",null),function(e){if(t&&e.owner===t._id)return r.a.createElement("div",null,r.a.createElement("div",null,p()," "),r.a.createElement("button",{className:"button",onClick:function(){return h()}},"Delete project"),r.a.createElement("div",null,f()," "))}(s),r.a.createElement("br",null))},U=function(e){var t=e.match,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),f=p[0],h=p[1];Object(n.useEffect)((function(){l||d()}));var d=function(){var e=Object(u.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.params,e.prev=1,e.next=4,v.a.get("".concat("https://project-management-05.herokuapp.com/api","/projects/").concat(a.id,"/tasks/").concat(a.taskId),{withCredentials:!0});case 4:n=e.sent,o(n.data.title),h(n.data.description),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h1",null,l),r.a.createElement("p",null,f))},D=function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(w.b,{to:"/"},"Login")),r.a.createElement("li",null,r.a.createElement(w.b,{to:"/signup"},"Signup")))))},I=function(e){var t=e.username,a=e.logoutUser;return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(w.b,{to:"/projects",className:"navbar-item"},"Projects"))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},"Welcome, ",t),r.a.createElement("div",{className:"navbar-item"},r.a.createElement("button",{className:"button is-small",onClick:a},"Logout"))))},_=function(e){var t=e.getUser,a=function(){var e=Object(u.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new d,e.prev=1,e.next=4,a.logout();case 4:t(null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(g.Consumer,null,(function(e){return e?r.a.createElement(I,{username:e.username,logoutUser:a}):r.a.createElement(D,null)}))},F=function(e){var t=e.getUser,a=e.history,c=Object(n.useState)(""),l=Object(i.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],v=f[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),g=E[0],j=E[1],O=function(){var e=Object(u.a)(s.a.mark((function e(n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=new d,e.prev=2,e.next=5,r.signup(o,h);case 5:c=e.sent,m(""),v(""),t(c),a.push("/projects"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),j(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container",style:{width:"50vw"}},r.a.createElement("form",{onSubmit:O},r.a.createElement("label",{htmlFor:"username"}," Username: "),r.a.createElement(k,{type:"text",name:"username",value:o,handleChange:function(e){return m(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"}," Password: "),r.a.createElement(k,{type:"password",name:"password",value:h,handleChange:function(e){return v(e.target.value)}}),r.a.createElement("button",{className:"button",type:"submit"},"Signup")),r.a.createElement("br",null),g&&r.a.createElement("p",{className:"notification is-danger"},g),r.a.createElement("p",null,"Already have account ?",r.a.createElement(w.b,{to:"/"}," Login "))))},T=function(e){var t=e.getUser,a=e.location,c=e.history,l=Object(n.useState)(""),o=Object(i.a)(l,2),m=o[0],p=o[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),v=h[0],b=h[1],E=function(){var e=Object(u.a)(s.a.mark((function e(n){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new d,n.preventDefault(),e.prev=2,e.next=5,r.login(m,v);case 5:l=e.sent,p(""),b(""),t(l),c.push(a.prevPath?a.prevPath:"/projects"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container",style:{width:"50vw"}},r.a.createElement("form",{onSubmit:E},r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement(k,{type:"text",name:"username",value:m,handleChange:function(e){return p(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement(k,{type:"password",name:"password",value:v,handleChange:function(e){return b(e.target.value)}}),r.a.createElement("button",{className:"button"},"Login")),r.a.createElement("p",null,"Don't have account?",r.a.createElement(w.b,{to:"/signup"}," Signup"))))},L=function(){return r.a.createElement(g.Consumer,null,(function(e){return r.a.createElement("h1",{className:"title is-2"},"welcome, ",e.username)}))},A=function(){return r.a.createElement("h1",{className:"title is-1"},"no dounut for you!")},B=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){a||l()}));var l=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new d,null!==a){e.next=12;break}return e.prev=2,e.next=5,t.loggedin();case 5:n=e.sent,c(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c(null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),o=function(e){c(e)};return r.a.createElement(g.Provider,{value:a},r.a.createElement("div",{className:"section is-hd"},r.a.createElement(_,{getUser:o}),r.a.createElement("div",{className:"container"},r.a.createElement(m.d,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{exact:!0,path:"/projects",component:N}),r.a.createElement(O,{exact:!0,path:"/projects/:id/tasks/:taskId",component:U}),r.a.createElement(O,{exact:!0,path:"/projects/:id",component:P}),r.a.createElement(O,{exact:!0,path:"/",component:L})):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(F,Object.assign({getUser:o},e))}}),r.a.createElement(m.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(T,Object.assign({getUser:o},e))}}),r.a.createElement(O,{exact:!0,path:"/projects/:id",component:P}),r.a.createElement(O,{exact:!0,path:"/projects",component:N}),r.a.createElement(O,{exact:!0,path:"/projects/:id/tasks/:taskId",component:U})),r.a.createElement(m.b,{component:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(64);l.a.render(r.a.createElement(w.a,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.e0017850.chunk.js.map